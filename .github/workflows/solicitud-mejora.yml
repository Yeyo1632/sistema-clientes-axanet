name: ğŸ’¡ Solicitud de Mejora
description: Flujo automatizado para procesar solicitudes de mejora del sistema

on:
  workflow_dispatch:
    inputs:
      titulo_mejora:
        description: 'TÃ­tulo de la solicitud de mejora'
        required: true
        type: string
      descripcion_mejora:
        description: 'DescripciÃ³n detallada de la mejora solicitada'
        required: true
        type: string
      tipo_mejora:
        description: 'Tipo de mejora solicitada'
        required: true
        type: choice
        options:
        - Nueva funcionalidad
        - Mejora de interfaz de usuario
        - OptimizaciÃ³n de rendimiento
        - CorrecciÃ³n de errores
        - Mejora de seguridad
        - AutomatizaciÃ³n de procesos
        - Mejora en reportes
        - IntegraciÃ³n con otros sistemas
      prioridad:
        description: 'Prioridad de la mejora'
        required: true
        type: choice
        options:
        - Baja (mejora futura)
        - Media (prÃ³ximo release)
        - Alta (sprint actual)
        - CrÃ­tica (inmediata)
      solicitado_por:
        description: 'Departamento que solicita la mejora'
        required: true
        type: choice
        options:
        - Servicio al Cliente
        - Ventas
        - Soporte TÃ©cnico
        - Desarrollo
        - Finanzas
        - Operaciones
        - Cliente Directo
      impacto_esperado:
        description: 'Impacto esperado de esta mejora'
        required: true
        type: choice
        options:
        - Mejora eficiencia interna
        - Mejora experiencia cliente
        - ReducciÃ³n de costos
        - Incremento en ventas
        - Cumplimiento regulatorio
        - Ventaja competitiva

jobs:
  procesar-solicitud-mejora:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¢ Anunciar nueva solicitud de mejora
        run: |
          echo "ğŸ’¡ [SOLICITUD DE MEJORA RECIBIDA]"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“ TÃ­tulo: '${{ github.event.inputs.titulo_mejora }}'"
          echo "ğŸ¯ Tipo: ${{ github.event.inputs.tipo_mejora }}"
          echo "ğŸš¨ Prioridad: ${{ github.event.inputs.prioridad }}"
          echo "ğŸ¢ Solicitado por: ${{ github.event.inputs.solicitado_por }}"
          echo "ğŸ“Š Impacto esperado: ${{ github.event.inputs.impacto_esperado }}"
          echo "ğŸ‘¤ Solicitante: ${{ github.actor }}"
          echo "ğŸ“… Fecha recepciÃ³n: $(date)"
          echo "ğŸ”¢ ID Solicitud: MEJ-$(date +%Y%m%d-%H%M%S)"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“‹ DescripciÃ³n:"
          echo "${{ github.event.inputs.descripcion_mejora }}"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          
      - name: ğŸ‘¥ Notificar a todos los equipos
        run: |
          echo "ğŸ“¢ NOTIFICANDO A TODOS LOS EQUIPOS:"
          echo ""
          echo "â€¢ ğŸ‘¨â€ğŸ’» DevLead - @dev-lead-axanet (ASIGNADO PARA REVISIÃ“N)"
          echo "â€¢ ğŸ‘¨â€ğŸ’» DevTeam - @dev-team-axanet"
          echo "â€¢ ğŸ–¥ï¸  ITTeam - @it-support-axanet"
          echo "â€¢ ğŸ’¼ CustServTeam - @customer-success-axanet"
          echo "â€¢ ğŸ“Š SalesTeam - @sales-axanet"
          echo "â€¢ ğŸ’° FinanceTeam - @finance-axanet"
          echo "â€¢ ğŸ¢ OpsTeam - @operations-axanet"
          echo "â€¢ ğŸš¨ Management - @management-axanet"
          echo ""
          echo "ğŸ”” AsignaciÃ³n automÃ¡tica: DevLead para revisiÃ³n inicial"
          echo "ğŸ“‹ PrÃ³ximo paso: EvaluaciÃ³n de viabilidad tÃ©cnica"
          
      - name: ğŸ¯ Definir criterios de evaluaciÃ³n
        run: |
          echo "ğŸ“Š CRITERIOS DE EVALUACIÃ“N AUTOMÃTICOS:"
          echo ""
          case "${{ github.event.inputs.prioridad }}" in
            "CrÃ­tica (inmediata)")
              echo "â° TIMELINE: RevisiÃ³n en 24 horas"
              echo "ğŸ¯ IMPACTO: Alto - RevisiÃ³n urgente"
              echo "ğŸ”§ RECURSOS: MÃ¡xima prioridad"
              ;;
            "Alta (sprint actual)")
              echo "â° TIMELINE: RevisiÃ³n en 48 horas"
              echo "ğŸ¯ IMPACTO: Alto - Sprint prÃ³ximo"
              echo "ğŸ”§ RECURSOS: Alta prioridad"
              ;;
            "Media (prÃ³ximo release)")
              echo "â° TIMELINE: RevisiÃ³n en 1 semana"
              echo "ğŸ¯ IMPACTO: Medio - Planning release"
              echo "ğŸ”§ RECURSOS: Prioridad media"
              ;;
            "Baja (mejora futura)")
              echo "â° TIMELINE: RevisiÃ³n en 2 semanas"
              echo "ğŸ¯ IMPACTO: Bajo - Backlog futuro"
              echo "ğŸ”§ RECURSOS: Baja prioridad"
              ;;
          esac
          echo ""
          echo "ğŸ“ˆ IMPACTO ESPERADO: ${{ github.event.inputs.impacto_esperado }}"
          
      - name: ğŸ“‹ Crear tareas de evaluaciÃ³n inicial
        run: |
          echo "âœ… TAREAS DE EVALUACIÃ“N CREADAS:"
          echo ""
          echo "   [ ] 1. AnÃ¡lisis de viabilidad tÃ©cnica - DevLead"
          echo "   [ ] 2. EstimaciÃ³n de esfuerzo - DevTeam"
          echo "   [ ] 3. EvaluaciÃ³n de impacto - ${{ github.event.inputs.solicitado_por }}"
          echo "   [ ] 4. AnÃ¡lisis de ROI - FinanceTeam"
          echo "   [ ] 5. Plan de implementaciÃ³n - OpsTeam"
          echo ""
          echo "ğŸ“… ReuniÃ³n de evaluaciÃ³n programada para:"
          if [ "${{ github.event.inputs.prioridad }}" = "CrÃ­tica (inmediata)" ]; then
            echo "   ğŸš¨ HOY - SesiÃ³n urgente"
          elif [ "${{ github.event.inputs.prioridad }}" = "Alta (sprint actual)" ]; then
            echo "   ğŸ“… PrÃ³ximas 48 horas"
          else
            echo "   ğŸ“… PrÃ³xima reuniÃ³n de planning"
          fi
          
      - name: ğŸ“ Registrar en backlog de mejoras
        run: |
          echo "ğŸ“ REGISTRANDO EN BACKLOG DE MEJORAS:"
          timestamp=$(date -Iseconds)
          mejora_id="MEJ-$(date +%Y%m%d-%H%M%S)"
          
          cat >> backlog-mejoras.md << EOF
          
          ## $mejora_id - ${{ github.event.inputs.titulo_mejora }}
          
          **Estado**: ğŸ“ Recibida
          **Prioridad**: ${{ github.event.inputs.prioridad }}
          **Tipo**: ${{ github.event.inputs.tipo_mejora }}
          **Solicitante**: ${{ github.event.inputs.solicitado_por }} (${{ github.actor }})
          **Impacto**: ${{ github.event.inputs.impacto_esperado }}
          **Fecha**: $timestamp
          
          ### DescripciÃ³n
          ${{ github.event.inputs.descripcion_mejora }}
          
          ### Asignaciones
          - **RevisiÃ³n inicial**: DevLead
          - **EvaluaciÃ³n tÃ©cnica**: DevTeam
          - **Impacto negocio**: ${{ github.event.inputs.solicitado_por }}
          
          ### Criterios de AceptaciÃ³n
          - [ ] Viabilidad tÃ©cnica confirmada
          - [ ] EstimaciÃ³n de esfuerzo completada
          - [ ] ROI positivo identificado
          - [ ] Plan de implementaciÃ³n definido
          
          ---
          EOF
          
          echo "âœ… Mejora registrada en backlog con ID: $mejora_id"
          echo "ğŸ“Š Total de mejoras en backlog: $(grep -c '^## MEJ-' backlog-mejoras.md 2>/dev/null || echo 0)"
          
      - name: ğŸ”„ Flujo de trabajo activado
        run: |
          echo "ğŸ”„ FLUJO DE TRABAJO ACTIVADO:"
          echo ""
          echo "1. ğŸ“ SOLICITUD RECIBIDA â†’ âœ… COMPLETADO"
          echo "2. ğŸ‘¥ NOTIFICACIÃ“N EQUIPOS â†’ âœ… COMPLETADO" 
          echo "3. ğŸ¯ EVALUACIÃ“N INICIAL â†’ ğŸŸ¡ PENDIENTE (DevLead)"
          echo "4. ğŸ“Š ANÃLISIS DETALLADO â†’ â³ PROGRAMADO"
          echo "5. ğŸš€ IMPLEMENTACIÃ“N â†’ â³ POR DEFINIR"
          echo ""
          echo "ğŸ“§ Notificaciones automÃ¡ticas configuradas para:"
          echo "   â€¢ Cambios de estado"
          echo "   â€¢ Comentarios del equipo"
          echo "   â€¢ Actualizaciones de timeline"
          echo "   â€¢ CompletaciÃ³n de tareas"
